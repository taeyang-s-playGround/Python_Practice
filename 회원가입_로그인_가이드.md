# Django Rest Framework íšŒì›ê°€ì… & ë¡œê·¸ì¸ ê°€ì´ë“œ

## ğŸ“‹ ëª©ì°¨
1. [ê°œìš”](#ê°œìš”)
2. [Token ì¸ì¦ ë°©ì‹](#token-ì¸ì¦-ë°©ì‹)
3. [í”„ë¡œì íŠ¸ êµ¬ì¡°](#í”„ë¡œì íŠ¸-êµ¬ì¡°)
4. [ì„¤ì • ë° êµ¬í˜„](#ì„¤ì •-ë°-êµ¬í˜„)
5. [API ì‚¬ìš©ë²•](#api-ì‚¬ìš©ë²•)
6. [ì¸ì¦ì´ í•„ìš”í•œ API ì‚¬ìš©í•˜ê¸°](#ì¸ì¦ì´-í•„ìš”í•œ-api-ì‚¬ìš©í•˜ê¸°)
7. [ë³´ì•ˆ ê³ ë ¤ì‚¬í•­](#ë³´ì•ˆ-ê³ ë ¤ì‚¬í•­)

---

## ê°œìš”

Django Rest Frameworkë¥¼ ì‚¬ìš©í•˜ì—¬ íšŒì›ê°€ì…ê³¼ ë¡œê·¸ì¸ ê¸°ëŠ¥ì„ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤. Token ê¸°ë°˜ ì¸ì¦ ë°©ì‹ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.

### êµ¬í˜„ëœ ê¸°ëŠ¥
- âœ… íšŒì›ê°€ì… (ì¸ì¦ ë¶ˆí•„ìš”)
- âœ… ë¡œê·¸ì¸ (ì¸ì¦ ë¶ˆí•„ìš”)
- âœ… Token ê¸°ë°˜ ì¸ì¦
- âœ… ë¹„ë°€ë²ˆí˜¸ í™•ì¸ ê²€ì¦
- âœ… ì‚¬ìš©ì ì •ë³´ ì¡°íšŒ (ì¸ì¦ í•„ìš”)

### Token ì¸ì¦ì´ë€?
- ì‚¬ìš©ìê°€ ë¡œê·¸ì¸í•˜ë©´ ê³ ìœ í•œ Tokenì„ ë°œê¸‰ë°›ìŒ
- ì´í›„ API ìš”ì²­ ì‹œ ì´ Tokenì„ í—¤ë”ì— í¬í•¨í•˜ì—¬ ì¸ì¦
- ì„¸ì…˜ ê¸°ë°˜ ì¸ì¦ë³´ë‹¤ RESTful APIì— ì í•©

---

## Token ì¸ì¦ ë°©ì‹

### ë™ì‘ ì›ë¦¬

```
1. íšŒì›ê°€ì…/ë¡œê·¸ì¸
   â†“
2. ì„œë²„ê°€ Token ë°œê¸‰
   â†“
3. í´ë¼ì´ì–¸íŠ¸ê°€ Token ì €ì¥
   â†“
4. ì´í›„ ìš”ì²­ ì‹œ Tokenì„ í—¤ë”ì— í¬í•¨
   â†“
5. ì„œë²„ê°€ Token ê²€ì¦ í›„ ìš”ì²­ ì²˜ë¦¬
```

### Tokenì˜ ì¥ì 
- **ë¬´ìƒíƒœ(Stateless)**: ì„œë²„ì— ì„¸ì…˜ ì €ì¥ ë¶ˆí•„ìš”
- **í™•ì¥ì„±**: ì—¬ëŸ¬ ì„œë²„ì—ì„œ ë™ì¼í•œ Token ì‚¬ìš© ê°€ëŠ¥
- **ëª¨ë°”ì¼ ì¹œí™”ì **: ì•±ì—ì„œ ì‚¬ìš©í•˜ê¸° í¸ë¦¬
- **CORS ë¬¸ì œ ì—†ìŒ**: ì¿ í‚¤ ì—†ì´ í—¤ë”ë§Œ ì‚¬ìš©

### Tokenì˜ ë‹¨ì 
- **ë³´ì•ˆ ê´€ë¦¬ í•„ìš”**: Tokenì´ íƒˆì·¨ë˜ë©´ ìœ„í—˜
- **ë§Œë£Œ ì‹œê°„ ê´€ë¦¬**: ë³´í†µ ì§§ì€ ë§Œë£Œ ì‹œê°„ ì„¤ì •
- **ë¡œê·¸ì•„ì›ƒ ì²˜ë¦¬**: ì„œë²„ì—ì„œ Token ë¬´íš¨í™” í•„ìš”

---

## í”„ë¡œì íŠ¸ êµ¬ì¡°

```
mysite/
â”œâ”€â”€ accounts/              # ìƒˆë¡œ ìƒì„±ëœ ì¸ì¦ ì•±
â”‚   â”œâ”€â”€ serializers.py     # UserSerializer
â”‚   â”œâ”€â”€ views.py           # UserViewSet (íšŒì›ê°€ì…, ë¡œê·¸ì¸)
â”‚   â””â”€â”€ urls.py            # URL ë¼ìš°íŒ…
â”œâ”€â”€ mysite/
â”‚   â”œâ”€â”€ settings.py        # Token ì¸ì¦ ì„¤ì • ì¶”ê°€
â”‚   â””â”€â”€ urls.py            # accounts.urls ì—°ê²°
â””â”€â”€ posts/                 # ê¸°ì¡´ ì•±
```

---

## ì„¤ì • ë° êµ¬í˜„

### 1. accounts ì•± ìƒì„±

```bash
cd mysite
python manage.py startapp accounts
```

**accounts ì•±ì˜ ì—­í• :**
- ì‚¬ìš©ì ì¸ì¦ ê´€ë ¨ ê¸°ëŠ¥ ë‹´ë‹¹
- íšŒì›ê°€ì…, ë¡œê·¸ì¸, ì‚¬ìš©ì ê´€ë¦¬

### 2. settings.py ì„¤ì •

**INSTALLED_APPSì— ì¶”ê°€:**
```python
INSTALLED_APPS = [
    # ... ê¸°ì¡´ ì•±ë“¤
    'rest_framework',
    'rest_framework.authtoken',  # Token ì¸ì¦ ì¶”ê°€
    'posts',
    'accounts',  # accounts ì•± ì¶”ê°€
]
```

**REST_FRAMEWORK ì„¤ì • ì¶”ê°€:**
```python
REST_FRAMEWORK = {
    'DEFAULT_AUTHENTICATION_CLASSES': [
        'rest_framework.authentication.TokenAuthentication',  # Token ì¸ì¦
        'rest_framework.authentication.SessionAuthentication',  # ì„¸ì…˜ ì¸ì¦ (ì„ íƒ)
    ],
    'DEFAULT_PERMISSION_CLASSES': [
        'rest_framework.permissions.IsAuthenticated',  # ê¸°ë³¸ì ìœ¼ë¡œ ì¸ì¦ í•„ìš”
    ],
}
```

**ì„¤ì • ì„¤ëª…:**
- `DEFAULT_AUTHENTICATION_CLASSES`: ì‚¬ìš©í•  ì¸ì¦ ë°©ì‹ ì§€ì •
  - `TokenAuthentication`: Token ê¸°ë°˜ ì¸ì¦
  - `SessionAuthentication`: ì„¸ì…˜ ê¸°ë°˜ ì¸ì¦ (ê´€ë¦¬ì í˜ì´ì§€ ë“±ì—ì„œ ì‚¬ìš©)
- `DEFAULT_PERMISSION_CLASSES`: ê¸°ë³¸ ê¶Œí•œ ì„¤ì •
  - `IsAuthenticated`: ì¸ì¦ëœ ì‚¬ìš©ìë§Œ ì ‘ê·¼ ê°€ëŠ¥
  - ê°œë³„ ViewSetì—ì„œ `AllowAny`ë¡œ ì˜¤ë²„ë¼ì´ë“œ ê°€ëŠ¥

### 3. ë§ˆì´ê·¸ë ˆì´ì…˜ ì ìš©

```bash
python manage.py migrate
```

**ê²°ê³¼:**
- `authtoken` ì•±ì˜ ë§ˆì´ê·¸ë ˆì´ì…˜ì´ ì ìš©ë¨
- `authtoken_token` í…Œì´ë¸”ì´ ìƒì„±ë¨ (Token ì €ì¥)

---

## ì„¤ì • ë° êµ¬í˜„ ìƒì„¸

### 1. UserSerializer (serializers.py)

**ìœ„ì¹˜**: `mysite/accounts/serializers.py`

```python
from rest_framework import serializers
from django.contrib.auth.models import User
from rest_framework.authtoken.models import Token

class UserSerializer(serializers.ModelSerializer):
    password = serializers.CharField(write_only=True, required=True)
    password_confirm = serializers.CharField(write_only=True, required=True)

    class Meta:
        model = User
        fields = ['id', 'username', 'email', 'password', 'password_confirm']
        extra_kwargs = {
            'password': {'write_only': True},
        }

    def validate(self, attrs):
        if attrs['password'] != attrs['password_confirm']:
            raise serializers.ValidationError({"password": "ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤."})
        return attrs

    def create(self, validated_data):
        validated_data.pop('password_confirm')
        user = User.objects.create_user(
            username=validated_data['username'],
            email=validated_data.get('email', ''),
            password=validated_data['password']
        )
        Token.objects.create(user=user)
        return user
```

#### ì½”ë“œ ë¶„ì„

**í•„ë“œ ì •ì˜:**
- `password`: ë¹„ë°€ë²ˆí˜¸ (write_only - ì‘ë‹µì— í¬í•¨ ì•ˆ ë¨)
- `password_confirm`: ë¹„ë°€ë²ˆí˜¸ í™•ì¸
- `username`, `email`: ì‚¬ìš©ì ì •ë³´

**`write_only=True`ë€?**
- API ì‘ë‹µì— í¬í•¨ë˜ì§€ ì•ŠìŒ (ë³´ì•ˆ)
- ì…ë ¥ë§Œ ë°›ê³  ì¶œë ¥ì€ í•˜ì§€ ì•ŠìŒ
- ë¹„ë°€ë²ˆí˜¸ëŠ” ì ˆëŒ€ ì‘ë‹µì— í¬í•¨í•˜ë©´ ì•ˆ ë¨

**`validate()` ë©”ì„œë“œ:**
- ë¹„ë°€ë²ˆí˜¸ì™€ ë¹„ë°€ë²ˆí˜¸ í™•ì¸ì´ ì¼ì¹˜í•˜ëŠ”ì§€ ê²€ì¦
- ì¼ì¹˜í•˜ì§€ ì•Šìœ¼ë©´ ValidationError ë°œìƒ

**`create()` ë©”ì„œë“œ:**
- `password_confirm` ì œê±° (DBì— ì €ì¥í•  í•„ìš” ì—†ìŒ)
- `User.objects.create_user()`: ë¹„ë°€ë²ˆí˜¸ë¥¼ í•´ì‹œí•˜ì—¬ ì €ì¥
- `Token.objects.create()`: ì‚¬ìš©ì ìƒì„± ì‹œ Token ìë™ ìƒì„±

**ì™œ `create_user()`ë¥¼ ì‚¬ìš©í•˜ë‚˜ìš”?**
```python
# âŒ ë‚˜ìœ ì˜ˆ: ë¹„ë°€ë²ˆí˜¸ê°€ í‰ë¬¸ìœ¼ë¡œ ì €ì¥ë¨
user = User.objects.create(
    username='test',
    password='1234'  # í‰ë¬¸ìœ¼ë¡œ ì €ì¥ë¨!
)

# âœ… ì¢‹ì€ ì˜ˆ: ë¹„ë°€ë²ˆí˜¸ê°€ í•´ì‹œë˜ì–´ ì €ì¥ë¨
user = User.objects.create_user(
    username='test',
    password='1234'  # ìë™ìœ¼ë¡œ í•´ì‹œë¨
)
```

### 2. UserViewSet (views.py)

**ìœ„ì¹˜**: `mysite/accounts/views.py`

```python
from rest_framework import viewsets, status
from rest_framework.decorators import action, permission_classes
from rest_framework.permissions import AllowAny, IsAuthenticated
from rest_framework.response import Response
from rest_framework.authtoken.models import Token
from django.contrib.auth.models import User
from django.contrib.auth import authenticate
from .serializers import UserSerializer

class UserViewSet(viewsets.ModelViewSet):
    queryset = User.objects.all()
    serializer_class = UserSerializer
    permission_classes = [IsAuthenticated]  # ê¸°ë³¸ì ìœ¼ë¡œ ì¸ì¦ í•„ìš”

    def get_permissions(self):
        """íŠ¹ì • ì•¡ì…˜ì— ë”°ë¼ ê¶Œí•œ ë³€ê²½"""
        if self.action in ['register', 'login']:
            return [AllowAny()]  # íšŒì›ê°€ì…, ë¡œê·¸ì¸ì€ ì¸ì¦ ë¶ˆí•„ìš”
        return [IsAuthenticated()]

    @action(detail=False, methods=['post'], permission_classes=[AllowAny])
    def register(self, request):
        """íšŒì›ê°€ì…"""
        serializer = self.get_serializer(data=request.data)
        if serializer.is_valid():
            user = serializer.save()
            token, created = Token.objects.get_or_create(user=user)
            return Response({
                'user': UserSerializer(user).data,
                'token': token.key,
                'message': 'íšŒì›ê°€ì…ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.'
            }, status=status.HTTP_201_CREATED)
        return Response(serializer.errors, status=status.HTTP_400_BAD_REQUEST)

    @action(detail=False, methods=['post'], permission_classes=[AllowAny])
    def login(self, request):
        """ë¡œê·¸ì¸"""
        username = request.data.get('username')
        password = request.data.get('password')

        if username is None or password is None:
            return Response(
                {'error': 'usernameê³¼ passwordë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.'},
                status=status.HTTP_400_BAD_REQUEST
            )

        user = authenticate(username=username, password=password)

        if not user:
            return Response(
                {'error': 'ì˜ëª»ëœ ì‚¬ìš©ì ì´ë¦„ ë˜ëŠ” ë¹„ë°€ë²ˆí˜¸ì…ë‹ˆë‹¤.'},
                status=status.HTTP_401_UNAUTHORIZED
            )

        token, created = Token.objects.get_or_create(user=user)
        return Response({
            'token': token.key,
            'user': UserSerializer(user).data,
            'message': 'ë¡œê·¸ì¸ ì„±ê³µ'
        }, status=status.HTTP_200_OK)
```

#### ì½”ë“œ ë¶„ì„

**ê¶Œí•œ ì„¤ì •:**
- `permission_classes = [IsAuthenticated]`: ê¸°ë³¸ì ìœ¼ë¡œ ì¸ì¦ í•„ìš”
- `get_permissions()`: ì•¡ì…˜ë³„ë¡œ ê¶Œí•œ ë³€ê²½
  - `register`, `login`: `AllowAny()` (ì¸ì¦ ë¶ˆí•„ìš”)
  - ë‚˜ë¨¸ì§€: `IsAuthenticated()` (ì¸ì¦ í•„ìš”)

**`@action` ë°ì½”ë ˆì´í„°:**
- ViewSetì— ì»¤ìŠ¤í…€ ì—”ë“œí¬ì¸íŠ¸ ì¶”ê°€
- `detail=False`: ë¦¬ìŠ¤íŠ¸ ë ˆë²¨ ì•¡ì…˜ (ì˜ˆ: `/api/auth/users/register/`)
- `detail=True`: ê°œë³„ ê°ì²´ ë ˆë²¨ ì•¡ì…˜ (ì˜ˆ: `/api/auth/users/{id}/custom_action/`)
- `methods=['post']`: POST ë©”ì„œë“œë§Œ í—ˆìš©

**íšŒì›ê°€ì… (`register`):**
1. Serializerë¡œ ë°ì´í„° ê²€ì¦
2. ìœ íš¨í•˜ë©´ ì‚¬ìš©ì ìƒì„± ë° Token ìƒì„±
3. ì‚¬ìš©ì ì •ë³´ì™€ Token ë°˜í™˜

**ë¡œê·¸ì¸ (`login`):**
1. `username`ê³¼ `password` ë°›ê¸°
2. `authenticate()`ë¡œ ì‚¬ìš©ì ì¸ì¦
3. ì¸ì¦ ì„±ê³µ ì‹œ Token ë°˜í™˜
4. ì¸ì¦ ì‹¤íŒ¨ ì‹œ ì—ëŸ¬ ë°˜í™˜

**`authenticate()` í•¨ìˆ˜:**
- Djangoì˜ ë‚´ì¥ ì¸ì¦ í•¨ìˆ˜
- ì‚¬ìš©ì ì´ë¦„ê³¼ ë¹„ë°€ë²ˆí˜¸ë¡œ ì¸ì¦
- ì„±ê³µ ì‹œ User ê°ì²´ ë°˜í™˜, ì‹¤íŒ¨ ì‹œ None ë°˜í™˜

### 3. URL ì„¤ì •

**accounts/urls.py:**
```python
from django.urls import path, include
from rest_framework.routers import DefaultRouter
from .views import UserViewSet

router = DefaultRouter()
router.register(r'users', UserViewSet, basename='user')

urlpatterns = [
    path('', include(router.urls)),
]
```

**mysite/urls.py:**
```python
urlpatterns = [
    path('admin/', admin.site.urls),
    path('api/', include('posts.urls')),
    path('api/auth/', include('accounts.urls')),  # ì¶”ê°€
]
```

**ìƒì„±ë˜ëŠ” URL:**
- `POST /api/auth/users/register/` - íšŒì›ê°€ì…
- `POST /api/auth/users/login/` - ë¡œê·¸ì¸
- `GET /api/auth/users/` - ì‚¬ìš©ì ëª©ë¡ (ì¸ì¦ í•„ìš”)
- `GET /api/auth/users/{id}/` - ì‚¬ìš©ì ìƒì„¸ (ì¸ì¦ í•„ìš”)

---

## API ì‚¬ìš©ë²•

### 1. íšŒì›ê°€ì… (POST)

**ìš”ì²­:**
```bash
POST http://localhost:8000/api/auth/users/register/
Content-Type: application/json

{
    "username": "testuser",
    "email": "test@example.com",
    "password": "testpassword123",
    "password_confirm": "testpassword123"
}
```

**ì‘ë‹µ (ì„±ê³µ):**
```json
{
    "user": {
        "id": 1,
        "username": "testuser",
        "email": "test@example.com"
    },
    "token": "9944b09199c62bcf9418ad846dd0e4bbdfc6ee4b",
    "message": "íšŒì›ê°€ì…ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤."
}
```

**ì‘ë‹µ (ì‹¤íŒ¨ - ë¹„ë°€ë²ˆí˜¸ ë¶ˆì¼ì¹˜):**
```json
{
    "password": ["ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤."]
}
```

**ì‘ë‹µ (ì‹¤íŒ¨ - ì‚¬ìš©ì ì´ë¦„ ì¤‘ë³µ):**
```json
{
    "username": ["A user with that username already exists."]
}
```

### 2. ë¡œê·¸ì¸ (POST)

**ìš”ì²­:**
```bash
POST http://localhost:8000/api/auth/users/login/
Content-Type: application/json

{
    "username": "testuser",
    "password": "testpassword123"
}
```

**ì‘ë‹µ (ì„±ê³µ):**
```json
{
    "token": "9944b09199c62bcf9418ad846dd0e4bbdfc6ee4b",
    "user": {
        "id": 1,
        "username": "testuser",
        "email": "test@example.com"
    },
    "message": "ë¡œê·¸ì¸ ì„±ê³µ"
}
```

**ì‘ë‹µ (ì‹¤íŒ¨ - ì˜ëª»ëœ ì •ë³´):**
```json
{
    "error": "ì˜ëª»ëœ ì‚¬ìš©ì ì´ë¦„ ë˜ëŠ” ë¹„ë°€ë²ˆí˜¸ì…ë‹ˆë‹¤."
}
```

**ì‘ë‹µ (ì‹¤íŒ¨ - í•„ìˆ˜ í•„ë“œ ëˆ„ë½):**
```json
{
    "error": "usernameê³¼ passwordë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”."
}
```

### 3. ì‚¬ìš©ì ëª©ë¡ ì¡°íšŒ (GET) - ì¸ì¦ í•„ìš”

**ìš”ì²­:**
```bash
GET http://localhost:8000/api/auth/users/
Authorization: Token 9944b09199c62bcf9418ad846dd0e4bbdfc6ee4b
```

**ì‘ë‹µ:**
```json
[
    {
        "id": 1,
        "username": "testuser",
        "email": "test@example.com"
    }
]
```

**ì¸ì¦ ì—†ì´ ìš”ì²­ ì‹œ:**
```json
{
    "detail": "Authentication credentials were not provided."
}
```

---

## ì¸ì¦ì´ í•„ìš”í•œ API ì‚¬ìš©í•˜ê¸°

### Tokenì„ í—¤ë”ì— í¬í•¨í•˜ê¸°

**ë°©ë²• 1: Authorization í—¤ë” (ê¶Œì¥)**
```bash
Authorization: Token 9944b09199c62bcf9418ad846dd0e4bbdfc6ee4b
```

**ë°©ë²• 2: curl ì‚¬ìš© ì˜ˆì‹œ**
```bash
curl -H "Authorization: Token 9944b09199c62bcf9418ad846dd0e4bbdfc6ee4b" \
     http://localhost:8000/api/auth/users/
```

**ë°©ë²• 3: JavaScript (fetch)**
```javascript
fetch('http://localhost:8000/api/auth/users/', {
    headers: {
        'Authorization': 'Token 9944b09199c62bcf9418ad846dd0e4bbdfc6ee4b'
    }
})
```

**ë°©ë²• 4: Python (requests)**
```python
import requests

token = "9944b09199c62bcf9418ad846dd0e4bbdfc6ee4b"
headers = {"Authorization": f"Token {token}"}

response = requests.get(
    "http://localhost:8000/api/auth/users/",
    headers=headers
)
```

### Postman ì‚¬ìš© ì˜ˆì‹œ

1. **íšŒì›ê°€ì…/ë¡œê·¸ì¸ìœ¼ë¡œ Token ë°›ê¸°**
2. **Headers íƒ­ì—ì„œ:**
   - Key: `Authorization`
   - Value: `Token {ë°›ì€í† í°}`

### ê¸°ì¡´ Post/Comment APIì— ì¸ì¦ ì ìš©

**í˜„ì¬ ìƒíƒœ:**
- Post/Comment APIëŠ” ì¸ì¦ ì—†ì´ ì ‘ê·¼ ê°€ëŠ¥

**ì¸ì¦ í•„ìš”í•˜ë„ë¡ ë³€ê²½í•˜ë ¤ë©´:**

**posts/views.py:**
```python
from rest_framework.permissions import IsAuthenticated

class PostViewSet(viewsets.ModelViewSet):
    queryset = Post.objects.all().order_by("-created_at")
    serializer_class = PostSerializer
    permission_classes = [IsAuthenticated]  # ì¸ì¦ í•„ìš”
```

**ì„ íƒì  ì¸ì¦ (ì½ê¸°ëŠ” ê°€ëŠ¥, ì“°ê¸°ëŠ” ì¸ì¦ í•„ìš”):**
```python
from rest_framework.permissions import IsAuthenticatedOrReadOnly

class PostViewSet(viewsets.ModelViewSet):
    queryset = Post.objects.all().order_by("-created_at")
    serializer_class = PostSerializer
    permission_classes = [IsAuthenticatedOrReadOnly]  # ì½ê¸°ëŠ” ê°€ëŠ¥, ì“°ê¸°ëŠ” ì¸ì¦ í•„ìš”
```

---

## ë³´ì•ˆ ê³ ë ¤ì‚¬í•­

### 1. ë¹„ë°€ë²ˆí˜¸ ë³´ì•ˆ

**í˜„ì¬ êµ¬í˜„:**
- âœ… ë¹„ë°€ë²ˆí˜¸ê°€ í•´ì‹œë˜ì–´ ì €ì¥ë¨ (`create_user()` ì‚¬ìš©)
- âœ… ë¹„ë°€ë²ˆí˜¸ê°€ ì‘ë‹µì— í¬í•¨ë˜ì§€ ì•ŠìŒ (`write_only=True`)
- âœ… ë¹„ë°€ë²ˆí˜¸ í™•ì¸ ê²€ì¦

**ì¶”ê°€ ê¶Œì¥ì‚¬í•­:**
- ë¹„ë°€ë²ˆí˜¸ ìµœì†Œ ê¸¸ì´ ì œí•œ (Django ê¸°ë³¸: 8ì)
- ë¹„ë°€ë²ˆí˜¸ ë³µì¡ë„ ìš”êµ¬ì‚¬í•­
- ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ ê¸°ëŠ¥

### 2. Token ë³´ì•ˆ

**í˜„ì¬ êµ¬í˜„:**
- âœ… Tokenì´ HTTP í—¤ë”ë¡œ ì „ì†¡ (ì¿ í‚¤ë³´ë‹¤ ì•ˆì „)
- âœ… Tokenì´ ì‘ë‹µì— í¬í•¨ë¨

**ì¶”ê°€ ê¶Œì¥ì‚¬í•­:**
- HTTPS ì‚¬ìš© (í”„ë¡œë•ì…˜ í™˜ê²½)
- Token ë§Œë£Œ ì‹œê°„ ì„¤ì •
- Token ê°±ì‹  ê¸°ëŠ¥
- ë¡œê·¸ì•„ì›ƒ ì‹œ Token ë¬´íš¨í™”

### 3. ì¸ì¦ ì‹¤íŒ¨ ì²˜ë¦¬

**í˜„ì¬ êµ¬í˜„:**
- âœ… ëª…í™•í•œ ì—ëŸ¬ ë©”ì‹œì§€
- âœ… ì ì ˆí•œ HTTP ìƒíƒœ ì½”ë“œ (401 Unauthorized)

**ì¶”ê°€ ê¶Œì¥ì‚¬í•­:**
- ë¡œê·¸ì¸ ì‹œë„ íšŸìˆ˜ ì œí•œ
- ê³„ì • ì ê¸ˆ ê¸°ëŠ¥
- ì´ë©”ì¼ ì¸ì¦

### 4. í”„ë¡œë•ì…˜ í™˜ê²½ ì„¤ì •

**settings.py ì˜ˆì‹œ:**
```python
# í”„ë¡œë•ì…˜ í™˜ê²½
REST_FRAMEWORK = {
    'DEFAULT_AUTHENTICATION_CLASSES': [
        'rest_framework.authentication.TokenAuthentication',
    ],
    'DEFAULT_PERMISSION_CLASSES': [
        'rest_framework.permissions.IsAuthenticated',
    ],
}

# CORS ì„¤ì • (í”„ë¡ íŠ¸ì—”ë“œì™€ í†µì‹  ì‹œ)
CORS_ALLOWED_ORIGINS = [
    "https://yourdomain.com",
]
```

---

## ê³ ê¸‰ ê¸°ëŠ¥ (ì„ íƒì‚¬í•­)

### 1. ë¡œê·¸ì•„ì›ƒ ê¸°ëŠ¥ ì¶”ê°€

**views.py:**
```python
@action(detail=False, methods=['post'], permission_classes=[IsAuthenticated])
def logout(self, request):
    """ë¡œê·¸ì•„ì›ƒ"""
    try:
        request.user.auth_token.delete()
        return Response({'message': 'ë¡œê·¸ì•„ì›ƒ ì„±ê³µ'}, status=status.HTTP_200_OK)
    except:
        return Response({'error': 'ë¡œê·¸ì•„ì›ƒ ì‹¤íŒ¨'}, status=status.HTTP_400_BAD_REQUEST)
```

### 2. í˜„ì¬ ì‚¬ìš©ì ì •ë³´ ì¡°íšŒ

**views.py:**
```python
@action(detail=False, methods=['get'], permission_classes=[IsAuthenticated])
def me(self, request):
    """í˜„ì¬ ë¡œê·¸ì¸í•œ ì‚¬ìš©ì ì •ë³´"""
    serializer = self.get_serializer(request.user)
    return Response(serializer.data)
```

**ì‚¬ìš©:**
```bash
GET http://localhost:8000/api/auth/users/me/
Authorization: Token {token}
```

### 3. ë¹„ë°€ë²ˆí˜¸ ë³€ê²½

**serializers.py:**
```python
class ChangePasswordSerializer(serializers.Serializer):
    old_password = serializers.CharField(required=True)
    new_password = serializers.CharField(required=True)
    new_password_confirm = serializers.CharField(required=True)

    def validate(self, attrs):
        if attrs['new_password'] != attrs['new_password_confirm']:
            raise serializers.ValidationError({"new_password": "ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤."})
        return attrs
```

**views.py:**
```python
@action(detail=False, methods=['post'], permission_classes=[IsAuthenticated])
def change_password(self, request):
    """ë¹„ë°€ë²ˆí˜¸ ë³€ê²½"""
    user = request.user
    serializer = ChangePasswordSerializer(data=request.data)
    
    if serializer.is_valid():
        if not user.check_password(serializer.validated_data['old_password']):
            return Response(
                {'error': 'í˜„ì¬ ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.'},
                status=status.HTTP_400_BAD_REQUEST
            )
        user.set_password(serializer.validated_data['new_password'])
        user.save()
        return Response({'message': 'ë¹„ë°€ë²ˆí˜¸ê°€ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤.'}, status=status.HTTP_200_OK)
    return Response(serializer.errors, status=status.HTTP_400_BAD_REQUEST)
```

---

## ë§ˆë¬´ë¦¬

íšŒì›ê°€ì…ê³¼ ë¡œê·¸ì¸ ê¸°ëŠ¥ì´ ì™„ì„±ë˜ì—ˆìŠµë‹ˆë‹¤!

### í•µì‹¬ ì •ë¦¬

1. **Token ì¸ì¦**: RESTful APIì— ì í•©í•œ ì¸ì¦ ë°©ì‹
2. **ê¶Œí•œ ê´€ë¦¬**: `AllowAny`ì™€ `IsAuthenticated`ë¡œ ì„¸ë°€í•œ ì œì–´
3. **ë³´ì•ˆ**: ë¹„ë°€ë²ˆí˜¸ í•´ì‹œ, Token í—¤ë” ì „ì†¡
4. **ì»¤ìŠ¤í…€ ì•¡ì…˜**: `@action` ë°ì½”ë ˆì´í„°ë¡œ íŠ¹ë³„í•œ ì—”ë“œí¬ì¸íŠ¸ ì¶”ê°€

### ë‹¤ìŒ ë‹¨ê³„

- JWT (JSON Web Token) ì‚¬ìš© (ë” ì•ˆì „í•˜ê³  í™•ì¥ ê°€ëŠ¥)
- ì´ë©”ì¼ ì¸ì¦
- ì†Œì…œ ë¡œê·¸ì¸ (Google, Facebook ë“±)
- ë¹„ë°€ë²ˆí˜¸ ì¬ì„¤ì • ê¸°ëŠ¥
- ì‚¬ìš©ì í”„ë¡œí•„ í™•ì¥

Happy Coding! ğŸš€

